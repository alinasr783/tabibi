# ุชุญุณููุงุช ูุธุงู Tabibi AI

## 1. Smart Search + Disambiguation (ุงูุจุญุซ ุงูุฐูู ูุญู ุงูุชุนุงุฑุถ)

### ุงูููุฒุฉ:
ุนูุฏูุง ูุทูุจ ุงูุฏูุชูุฑ ุฅูุดุงุก ููุนุฏ ููุฑูุถ ุจุงุณู ุดุงุฆุน (ูุซู "ุฃุญูุฏ")ุ ูููู ุงููุธุงู ุจู:
1. ุงูุจุญุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนู ุฌููุน ุงููุฑุถู ุจูุฐุง ุงูุงุณู
2. ุฅุฐุง ูุฌุฏ ุฃูุซุฑ ูู ูุฑูุถุ ูุนุฑุถ ูุงุฆูุฉ ููุงุฎุชูุงุฑ
3. ูุทูุจ ูู ุงูุฏูุชูุฑ ุชุญุฏูุฏ ุงููุฑูุถ ุงูููุตูุฏ

### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/ai/services/aiActions.js` - ุฅุถุงูุฉ `resolvePatientAction`

### ูุซุงู ุงูุงุณุชุฎุฏุงู:
```
ุฏูุชูุฑ: "ุงุนูู ูุนุงุฏ ูุฃุญูุฏ ุจูุฑู ุงูุณุงุนุฉ 5"
AI: "ูููุช ูุฑูุถูู ุจุงุณู ุฃุญูุฏ. ุชูุตุฏ ููุ"
     1. ุฃุญูุฏ ุฅุจุฑุงููู (01011111111)
     2. ุฃุญูุฏ ูุญูุฏ (01022222222)
ุฏูุชูุฑ: "ุฃุญูุฏ ุฅุจุฑุงููู"
AI: [ูููุฐ ุงูุญุฌุฒ]
```

---

## 2. Natural Language Time Interpretation (ููู ุงูููุช ุจุงูุทุฑููุฉ ุงูุทุจูุนูุฉ)

### ุงูููุฒุฉ:
ูููู ุงููุธุงู ุงูุชุนุจูุฑุงุช ุงูุทุจูุนูุฉ ููููุช ูุซู:
- "ุจูุฑู" = ุชุงุฑูุฎ ุงูุบุฏ
- "ุจุนุฏ ุงููุบุฑุจ" = ููุช ุตูุงุฉ ุงููุบุฑุจ + 30 ุฏูููุฉ
- "ุงูุณุงุนุฉ ุฎูุณุฉ ูุณุงุกู" = 17:00
- "ูุจู ุงูุธูุฑ" = 11:30

### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/ai/services/aiUtils.js` - ุฅุถุงูุฉ `parseNaturalTime` ู prayer times
- `src/ai/services/aiSystemPrompt.js` - ุฅุถุงูุฉ ุฃูุซูุฉ ููุฃููุงุช ุงูุทุจูุนูุฉ

### ูุซุงู ุงูุงุณุชุฎุฏุงู:
```
ุฏูุชูุฑ: "ุงุนูู ุญุฌุฒ ุจูุฑู ูุฃุญูุฏ ุฅุจุฑุงููู ุจุนุฏ ุงููุบุฑุจ"
AI: [ูููู ุฃู ุงูุชุงุฑูุฎ = ุบุฏุงูุ ูุงูููุช = 18:30]
```

---

## 3. Availability Checking (ูุญุต ุงูุชููุฑ ูุจู ุงูุญุฌุฒ)

### ุงูููุฒุฉ:
ุนูุฏ ูุญุงููุฉ ุญุฌุฒ ููุนุฏ:
1. ููุญุต ุงููุธุงู ุนุฏุฏ ุงูููุงุนูุฏ ูู ููุณ ุงูุณุงุนุฉ
2. ุฅุฐุง ูุงู ููุงู 3 ููุงุนูุฏ ุฃู ุฃูุซุฑุ ูุญุฐุฑ ุงูุฏูุชูุฑ
3. ููุชุฑุญ ุฃูุฑุจ ุณุงุนุฉ ูุชุงุญุฉ

### ุงููููุงุช ุงููุนุฏูุฉ:
- `src/ai/services/aiActions.js` - ุฅุถุงูุฉ `checkAvailabilityAction` ู `findNextAvailableSlot`

### ูุซุงู ุงูุงุณุชุฎุฏุงู:
```
ุฏูุชูุฑ: "ุงุนูู ูุนุงุฏ ุงูุณุงุนุฉ 3"
AI: "ุงูุณุงุนุฉ 3 ูููุง ุฒุญูุฉ ููููุง 3 ููุงุนูุฏ. ุชุญุจ ุชุถูููุง ุจุฑุถู ููุง ุชุญุฌุฒ ุงูุณุงุนุฉ 4 ุงููู ูููุด ูููุง ุฒุญูุฉุ"
```

---

## 4. Context Weighting System (ูุธุงู ุงูุณูุงู ุงููููุฒูู)

### ุงูููุฒุฉ:
ุจุฏูุงู ูู ุฅุฑุณุงู ูู ุงูุจูุงูุงุช ููู AI ูู ูู ูุฑุฉุ ุงููุธุงู:
1. ูุญูู ุณุคุงู ุงููุณุชุฎุฏู
2. ูุญุฏุฏ ุฃู ูุญุฏุงุช ุงูุณูุงู ุงููุทููุจุฉ ููุท
3. ูุฑุณู ููุท ุงููุนูููุงุช ุงูุถุฑูุฑูุฉ

### ุงููุญุฏุงุช ุงููุชุงุญุฉ:
- `patients` - ูุนูููุงุช ุงููุฑุถู
- `appointments` - ูุนูููุงุช ุงูููุงุนูุฏ
- `finance` - ุงููุนูููุงุช ุงููุงููุฉ
- `subscription` - ูุนูููุงุช ุงูุจุงูุฉ
- `staff` - ูุนูููุงุช ุงูููุธููู
- `treatments` - ุงูุฎุทุท ุงูุนูุงุฌูุฉ
- `clinic` - ุฅุนุฏุงุฏุงุช ุงูุนูุงุฏุฉ
- `actions` - ุงูุฃูุงูุฑ ุงูุชูููุฐูุฉ (ุฏุงุฆูุงู ูููุนูู)

### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
```
src/ai/services/prompts/
โโโ core.js                    # ุงูุชุนูููุงุช ุงูุฃุณุงุณูุฉ (ุฏุงุฆูุงู)
โโโ patients.js                # ูุนูููุงุช ุงููุฑุถู
โโโ appointments.js            # ูุนูููุงุช ุงูููุงุนูุฏ
โโโ finance.js                 # ุงููุนูููุงุช ุงููุงููุฉ
โโโ actions.js                 # ุงูุฃูุงูุฑ ุงูุชูููุฐูุฉ
โโโ contextSelector.js         # ุงุฎุชูุงุฑ ุงูุณูุงู ุงูููุงุณุจ
```

### ุงูููุงุฆุฏ:
- ุชูููู ุงุณุชููุงู tokens ุจูุณุจุฉ 40-60%
- ุงุณุชุฌุงุจุฉ ุฃุณุฑุน
- ุชูููุฉ ุฃูู

---

## 5. Speech-to-Text & Text-to-Speech (ุงูุตูุช)

### ุงูููุชุจุงุช ุงูููุซุจุชุฉ:
```json
{
  "react-speech-recognition": "^3.x",
  "regenerator-runtime": "^0.x"
}
```

### ุงูููุฒุงุช ุงููุงุฏูุฉ:
1. **Speech-to-Text:**
   - ุฒุฑ ูุชุณุฌูู ุงูุตูุช
   - ุชุญููู ุงูููุงู ููุต ุชููุงุฆูุงู
   - ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ

2. **Text-to-Speech:**
   - ูุฑุงุกุฉ ุงูุฑุฏูุฏ ุจุตูุช ุทุจูุนู
   - ุชุฎุทู ุงูุนูุงุตุฑ ุงููุฑุฆูุฉ (ุฑุณููุงุช ุจูุงููุฉ)
   - ูุตู ุงูุฑุณูู ุจููุงู ุจุฏูุงู ูู ูุฑุงุกุฉ ุงูุจูุงูุงุช

3. **Content Filtering:**
   - ุชุญููู ุงูุฑุณูู ุงูุจูุงููุฉ ููุตู ูุตู
   - ุชุฌูุจ ูุฑุงุกุฉ ุฃููุงุฏ JSON
   - ุชุญุณูู ุงููุทู ููุฃุฑูุงู ูุงูุชูุงุฑูุฎ

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ ููุชุทุจูู ุงููุงูู:

### โ ุชู ุชูููุฐู:
1. Smart Search + Disambiguation
2. Natural Language Time Parsing
3. Availability Checking
4. Context Weighting Structure
5. ุชุซุจูุช ููุชุจุงุช ุงูุตูุช

### ๐ง ููุฏ ุงูุชุทููุฑ:
1. ุฏูุฌ Context Selector ูุน aiCore.js
2. ุชุทุจูู Speech-to-Text UI
3. ุชุทุจูู Text-to-Speech ูุน filtering
4. ุงุฎุชุจุงุฑ ุดุงูู ููููุฒุงุช

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู:

### 1. ุงุฎุชุจุงุฑ Disambiguation:
```javascript
// ูู AI chat
"ุงุนูู ูุนุงุฏ ูุฃุญูุฏ"
// ุงููุธุงู ุณูุจุญุซ ููุนุฑุถ ูุงุฆูุฉ ุฅุฐุง ูุฌุฏ ุฃูุซุฑ ูู ุฃุญูุฏ
```

### 2. ุงุฎุชุจุงุฑ Natural Time:
```javascript
"ุงุญุฌุฒ ุจูุฑู ุจุนุฏ ุงููุบุฑุจ"
"ุงุนูู ููุนุฏ ุงูุณุงุนุฉ ุฎูุณุฉ ูุณุงุก"
```

### 3. ุงุฎุชุจุงุฑ Availability:
```javascript
"ุงุนูู ููุนุฏ ุงูุณุงุนุฉ 3"
// ุฅุฐุง ูุงู ููุงู 3 ููุงุนูุฏุ ุณูุญุฐุฑ ูููุชุฑุญ ุจุฏูู
```

---

## ุงูุฃุฏุงุก ูุงูุชุญุณููุงุช:

### ูุจู:
- ูู request ูุฑุณู ~5000 tokens
- ุฒูู ุงูุงุณุชุฌุงุจุฉ: 3-5 ุซูุงู
- ุงูุชูููุฉ: ุนุงููุฉ

### ุจุนุฏ:
- Context-aware requests: 2000-3000 tokens
- ุฒูู ุงูุงุณุชุฌุงุจุฉ: 1.5-3 ุซูุงู
- ุงูุชูููุฉ: 40-60% ุฃูู
- ุฏูุฉ ุฃุนูู ูู ุงูุฑุฏูุฏ

---

## ุงูููุงุญุธุงุช ุงููููุฉ:

1. **Prayer Times:** ูููู ุงุณุชุจุฏุงูู ุจู API ุญูููู ูุฃููุงุช ุงูุตูุงุฉ
2. **Context Selection:** ูุณุชุฎุฏู Gemini Flash ููุณุฑุนุฉ ูุงูุชูููุฉ ุงูููุฎูุถุฉ
3. **Fallback Logic:** ุฅุฐุง ูุดู Context Selectorุ ูุณุชุฎุฏู keyword-based selection
4. **Action Execution:** ุฌููุน ุงูุฃูุงูุฑ ุงูุชูููุฐูุฉ ููุซูุฉ ูู system prompt

---

## ุงูุชูุงูู ุงููุณุชูุจูู:

1. **Voice Assistant:**
   - ุชูุนูู/ุฅููุงู ุงููููุฑูููู
   - ุนุฑุถ ุงููุต ุงูููุทูู real-time
   - ุชุดุบูู ุงูุตูุช ุชููุงุฆูุงู

2. **Smart Suggestions:**
   - ุงูุชุฑุงุญ ุฃูุถู ุงูุฃููุงุช ููุญุฌุฒ
   - ุชุฐููุฑ ุจุงูููุงุนูุฏ ุงููุงุฏูุฉ
   - ุชุญููู ุฃููุงุท ุงูุญุฌุฒ

3. **Multi-language:**
   - ุฏุนู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
   - ุฏุนู ุงูููุฌุงุช ุงูุนุฑุจูุฉ ุงููุฎุชููุฉ

---

ุชู ุฅูุดุงุก ูุฐุง ุงููุณุชูุฏ ุจุชุงุฑูุฎ: 26 ุฏูุณูุจุฑ 2025
