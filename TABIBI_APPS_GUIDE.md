# ุฏููู ุงููุทูุฑ ููุธุงู ุชุทุจููุงุช ุทุจูุจู (Tabibi Apps Ecosystem)

ูุฐุง ุงููุณุชูุฏ ูููุฑ ุดุฑุญุงู ุชูุตูููุงู ูุดุงููุงู ููุธุงู "ุชุทุจููุงุช ุทุจูุจู"ุ ูููููุฉ ุฅุฏุงุฑุชูุ ุฅุถุงูุฉ ุชุทุจููุงุช ุฌุฏูุฏุฉุ ูุชุนุฏูู ุงูุชุทุจููุงุช ุงูุญุงููุฉ. ุชู ุชุตููู ูุฐุง ุงููุธุงู ููููู ูุฑูุงู ููุงุจูุงู ููุชูุณุน ุจุญูุซ ูููู ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ููููุตุฉ ุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ููููุฉ ุงููุธุงู ุงูุฃุณุงุณู.

---

## ๐๏ธ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู (Architecture Overview)

ูุนุชูุฏ ุงููุธุงู ุนูู **ุซูุงุซ ุฑูุงุฆุฒ ุฃุณุงุณูุฉ**:

1.  **ูุงุนุฏุฉ ุงูุจูุงูุงุช (`tabibi_apps`)**: ุชุญุชูุธ ุจุจูุงูุงุช ุงูุชุทุจูู ุงููุตููุฉ (ุงูุงุณูุ ุงููุตูุ ุงูุณุนุฑุ ุงูุฃููููุฉุ ูููุชุงุญ ุงูุฑุจุท).
2.  **ุณุฌู ุงูุชุทุจููุงุช (`appsRegistry.jsx`)**: ููู ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุนูู ูู "Map" ูุฑุจุท ุจูู "ููุชุงุญ ุงูุชุทุจูู" (Component Key) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจูู "ุงูููุฏ ุงููุนูู" (React Component).
3.  **ุนุงุฑุถ ุงูุชุทุจููุงุช (`MyAppViewer.jsx`)**: ุงูุญุงููุฉ ุงูุชู ุชููู ุจุชุญููู ุงูุชุทุจูู ุฏููุงููููุงู ุจูุงุกู ุนูู ุงูุฑุงุจุท.

---

## ๐ ููููุฉ ุฅุถุงูุฉ ุชุทุจูู ุฌุฏูุฏ (Step-by-Step)

ูุฅุถุงูุฉ ุชุทุจูู ุฌุฏูุฏ (ูุซูุงู: "ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒูู")ุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุงูุชุฑุชูุจ:

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุงุฌูุฉ ุงูุชุทุจูู (React Component)
ุฃููุงูุ ูู ุจุจุฑูุฌุฉ ูุงุฌูุฉ ุงูุชุทุจูู ูุฃู ูููู React ุนุงุฏู.

1.  ุฃูุดุฆ ูุฌูุฏุงู ุฌุฏูุฏุงู ูู `src/features/tabibi-tools/apps/` (ุฃู ุฃู ูุณุงุฑ ุชูุถูู).
2.  ุฃูุดุฆ ููู ุงูููููุ ูุซูุงู `InventoryManager.jsx`.

```jsx
// src/features/tabibi-tools/apps/inventory/InventoryManager.jsx
import React from 'react';

const InventoryManager = () => {
  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold">ุฅุฏุงุฑุฉ ุงููุฎุฒูู</h1>
      <p>ูุฑุญุจุงู ุจู ูู ุชุทุจูู ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุงูุฎุงุต ุจุทุจูุจู.</p>
      {/* ุจุงูู ููุฏ ุงูุชุทุจูู ููุง */}
    </div>
  );
};

export default InventoryManager;
```

### ุงูุฎุทูุฉ 2: ุชุณุฌูู ุงูุชุทุจูู ูู `appsRegistry.jsx`
ุงูุขู ูุฌุจ ุฃู ุชุฎุจุฑ ุงููุธุงู ุจูุฌูุฏ ูุฐุง ุงููููู.

1.  ุงูุชุญ ุงูููู: `src/features/tabibi-tools/appsRegistry.jsx`.
2.  ูู ุจุงุณุชูุฑุงุฏ ุงููููู ุงูุฐู ุฃูุดุฃุชู.
3.  ุฃุถูู ุฅูู `APPS_COMPONENT_REGISTRY` ูุน ุงุฎุชูุงุฑ **ููุชุงุญ ูุฑูุฏ (Key)** (ูุซูุงู: `inventory_manager`).
4.  ุงุฎุชุฑ ุฃููููุฉ ููุงุณุจุฉ ูู ููุชุจุฉ `lucide-react` ูุฃุถููุง ูู `APPS_ICON_REGISTRY`.

```javascript
// src/features/tabibi-tools/appsRegistry.jsx
import { Box } from "lucide-react"; // ุงุณุชูุฑุงุฏ ุงูุฃููููุฉ
import InventoryManager from "./apps/inventory/InventoryManager"; // ุงุณุชูุฑุงุฏ ุงููููู

export const APPS_COMPONENT_REGISTRY = {
  // ... ุงูุชุทุจููุงุช ุงูุฃุฎุฑู
  'inventory_manager': InventoryManager, // ุงูุฑุจุท ููุง
};

export const APPS_ICON_REGISTRY = {
  // ... ุงูุฃููููุงุช ุงูุฃุฎุฑู
  'Box': Box, // ุชุณุฌูู ุงุณู ุงูุฃููููุฉ ุงููุตู
};
```

### ุงูุฎุทูุฉ 3: ุฅุฏุฎุงู ุจูุงูุงุช ุงูุชุทุจูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (SQL)
ุงูุขู ูุฌุจ ุฅุถุงูุฉ ุงูุชุทุจูู ูููุชุฌุฑ ููู ูุฑุงู ุงููุณุชุฎุฏููู ููุชููููุง ูู ุชุซุจูุชู.

ููุฐ ุงุณุชุนูุงู SQL ุงูุชุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู:

```sql
INSERT INTO tabibi_apps (
    title,              -- ุงุณู ุงูุชุทุจูู
    short_description,  -- ูุตู ูุฎุชุตุฑ ูุธูุฑ ูู ุงููุงุฆูุฉ
    description,        -- ูุตู ูุงูู ูุธูุฑ ูู ุตูุญุฉ ุงูุชูุงุตูู
    price,              -- ุงูุณุนุฑ (0 ูููุฌุงูู)
    is_free,            -- ูู ูู ูุฌุงููุ
    icon_name,          -- ุงุณู ุงูุฃููููุฉ ููุง ูู ูู APPS_ICON_REGISTRY
    component_key,      -- ุงูููุชุงุญ ููุง ูู ูู APPS_COMPONENT_REGISTRY (ููู ุฌุฏุงู!)
    category,           -- ุงูุชุตููู (Management, AI, Marketing, etc)
    version,            -- ุฑูู ุงูุฅุตุฏุงุฑ
    developer_name,     -- ุงุณู ุงููุทูุฑ
    status              -- ุงูุญุงูุฉ (active, coming_soon, beta)
) VALUES (
    'ูุฏูุฑ ุงููุฎุฒูู',
    'ุชุชุจุน ุงููุณุชูุฒูุงุช ุงูุทุจูุฉ ูุงูุฃุฏููุฉ ูู ุนูุงุฏุชู',
    'ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงููุฎุฒูู ูุณูุญ ูู ุจุชุชุจุน ุงููููุงุชุ ุงูุชูุจูู ุนูุฏ ููุต ุงููุฎุฒููุ ูุฅุฏุงุฑุฉ ุงูููุฑุฏูู...',
    0,
    true,
    'Box',              -- ูุฌุจ ุฃู ูุทุงุจู ุงูุงุณู ูู appsRegistry
    'inventory_manager',-- ูุฌุจ ุฃู ูุทุงุจู ุงูููุชุงุญ ูู appsRegistry ุชูุงูุงู
    'Management',
    '1.0.0',
    'Tabibi Team',
    'active'
);
```

### ุงูุฎุทูุฉ 4: ุฅุถุงูุฉ ุตูุฑ ููุชุทุจูู (ุงุฎุชูุงุฑู)
ูุฅุถุงูุฉ ุตูุฑ ุชุธูุฑ ูู "ุงูุณูุงูุฏุฑ" (Carousel) ูู ุตูุญุฉ ุชูุงุตูู ุงูุชุทุจูู:

```sql
-- ุงูุชุฑุถ ุฃู id ุงูุชุทุจูู ุงูุฌุฏูุฏ ูู 5
INSERT INTO tabibi_app_images (app_id, image_url, sort_order) VALUES 
(5, '/screenshots/inventory-1.png', 1),
(5, '/screenshots/inventory-2.png', 2);
```

---

## ๐๏ธ ููููุฉ ุชุนุฏูู ุชุทุจูู ููุฌูุฏ

### ุชุนุฏูู ุงูููุฏ ูุงููุธุงุฆู
ุจุจุณุงุทุฉ ุงุฐูุจ ุฅูู ููู ุงููููู (ูุซู `InventoryManager.jsx`) ููู ุจุงูุชุนุฏูู ุนููู. ุงูุชุบููุฑุงุช ุณุชูุนูุณ ููุฑุงู ูููุณุชุฎุฏููู ูุฃู ุงููุธุงู ูุญูู ุงูููุฏ ูุจุงุดุฑุฉ.

### ุชุนุฏูู ุงูุจูุงูุงุช ุงููุตููุฉ (ุงูุงุณูุ ุงูุณุนุฑุ ุงููุตู)
ูุชู ุฐูู ุนู ุทุฑูู ุชุนุฏูู ุงูุตู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```sql
UPDATE tabibi_apps 
SET price = 100, is_free = false, description = 'ูุตู ุฌุฏูุฏ ููุทูุฑ...'
WHERE component_key = 'inventory_manager';
```

---

## ๐๏ธ ููููุฉ ุญุฐู ุฃู ุฅููุงู ุชุทุจูู

### ุงูุทุฑููุฉ 1: ุงูุฅููุงู ุงููุคูุช (Soft Delete) - ููุตู ุจู
ุฅุฐุง ููุช ุชุฑูุฏ ุฅุฎูุงุก ุงูุชุทุจูู ูู ุงููุชุฌุฑ ุฏูู ุญุฐู ุจูุงูุงุช ุงููุณุชุฎุฏููู:

```sql
UPDATE tabibi_apps SET status = 'inactive' WHERE component_key = 'inventory_manager';
```

### ุงูุทุฑููุฉ 2: ุงูุญุฐู ุงูููุงุฆู (Hard Delete)
**ุชุญุฐูุฑ:** ูุฐุง ูุฏ ูุณุจุจ ูุดุงูู ูููุณุชุฎุฏููู ุงูุฐูู ูุงููุง ุจุชุซุจูุช ุงูุชุทุจูู ุจุงููุนู.

1.  ุงุญุฐู ุงูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
    ```sql
    DELETE FROM tabibi_apps WHERE component_key = 'inventory_manager';
    ```
2.  ุงุญุฐู ุงูุฑุจุท ูู `appsRegistry.jsx`.
3.  ุงุญุฐู ููู ุงูููุฏ `InventoryManager.jsx`.

---

## ๐ ุนูุงูุฉ ุงูุชุทุจูู ุจุงููุณุชุฎุฏู (Install/Uninstall)

ุนูุฏูุง ูุถุบุท ุงูุทุจูุจ ุนูู "ุชูุนูู" (Install)ุ ูุชู ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `clinic_apps_subscriptions`.

- **ุงูุชุญูู ูู ุงูุชุซุจูุช:** ูู ุงูููุฏุ ูุณุชุฎุฏู `useQuery` ููุชุญูู ููุง ุฅุฐุง ูุงู `app_id` ููุฌูุฏุงู ูู ุงุดุชุฑุงูุงุช ุงูุนูุงุฏุฉ ุงูุญุงููุฉ.
- **ุฅูุบุงุก ุงูุชุซุจูุช:** ูููู ุงููุณุชุฎุฏู ุจุงูุถุบุท ุนูู "ุฅูุบุงุก ุงูุชูุนูู"ุ ููุง ูุญุฐู ุงูุณุฌู ูู `clinic_apps_subscriptions` ุฃู ูุบูุฑ ุญุงูุชู ุฅูู `cancelled`.

---

## ๐ก ูุตุงุฆุญ ูุงูุฉ ูููุทูุฑูู

1.  **ุชูุงูู ุงูููุงุชูุญ (Key Consistency):** ุฃูู ููุทุฉ ูู ุฃู ูููู `component_key` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุทุงุจูุงู ุชูุงูุงู ููููุชุงุญ ูู `APPS_COMPONENT_REGISTRY`. ุฃู ุงุฎุชูุงู ุณูุคุฏู ูุนุฏู ุชุญููู ุงูุชุทุจูู.
2.  **ุชุตููู ูุชุฌุงูุจ (Mobile First):** ุชุฃูุฏ ุฃู ูุงุฌูุฉ ุชุทุจููู ุชุนูู ุจุดูู ุฌูุฏ ุนูู ุงูููุจุงููุ ุญูุซ ุณูุชู ุนุฑุถูุง ุฏุงุฎู ุฅุทุงุฑ ุชุทุจูู ุทุจูุจู.
3.  **ุงุณุชุฎุฏุงู ุงูู Hooks:** ููููู ุงุณุชุฎุฏุงู ุฌููุน ุงูู Hooks ุงูููุฌูุฏุฉ ูู ุงููุธุงู (ูุซู `useAuth`, `useClinic`, `useQuery`) ุฏุงุฎู ุชุทุจููู ุงูุฌุฏูุฏ ูููุตูู ูุจูุงูุงุช ุงูุนูุงุฏุฉ ุงูุญุงููุฉ.
